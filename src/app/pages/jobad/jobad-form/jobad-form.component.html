<form [formGroup]="jobAdForm">
    <div class="form">
        <hr>
        <div class="block">
        <h2>General Information</h2>
        <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="center" class="block">
            <mat-tab label="ðŸ‡³ðŸ‡´ NOR">
                <mat-form-field class="row">
                    <input matInput formControlName="title_no" required>
                    <mat-label>Ad Title NOR</mat-label>
                </mat-form-field>

                <mat-form-field class="row">
                    <input matInput formControlName="position_title_no" required>
                    <mat-label>Position Title NOR</mat-label>
                </mat-form-field>

                <mat-form-field class="row">
                    <input matInput formControlName="description_short_no" required>
                    <mat-label>Short Description NOR</mat-label>
                </mat-form-field>

                <app-markdown-textfield 
                  (newHtmlText)=onDescriptionNoChange($event) 
                  [value]="jobAdForm.value.description_long_no"
                  [placeholder]="'Long Description NOR'" 
                  class="row">
                </app-markdown-textfield>
            </mat-tab>

            <mat-tab label="ðŸ‡ºðŸ‡¸ ENG">
                <mat-form-field class="row">
                    <input matInput formControlName="title_en">
                    <mat-label>Ad Title ENG</mat-label>
                </mat-form-field>

                <mat-form-field class="row">
                    <input matInput formControlName="position_title_en">
                    <mat-label>Position Title ENG</mat-label>
                </mat-form-field>

                <mat-form-field class="row">
                    <input matInput formControlName="description_short_en">
                    <mat-label>Short Description ENG</mat-label>
                </mat-form-field>

                <app-markdown-textfield 
                  (newHtmlText)=onDescriptionEnChange($event) 
                  [value]="jobAdForm.value.description_long_en"
                  [placeholder]="'Long Description ENG'" 
                  class="row">
                </app-markdown-textfield>
            </mat-tab>
        </mat-tab-group>

          <!-- Drop Down menu with Autocomplete capabilities for organizations -->
          <div>
            <mat-form-field class="dd" *ngIf="organizations.length > 0; else elseOrgBlock">
              <mat-label>Organization</mat-label>
              <input
                type="text"
                matInput
                [formControl]="autoControlOrgs"
                [matAutocomplete]="autoOrg"
              />

              <mat-autocomplete autoActiveFirstOption #autoOrg="matAutocomplete" [displayWith]="displayOrganizationFn">
                <mat-option
                  *ngFor="let o of filteredOrgs | async"
                  [value]="o"
                >
                  {{ o.name }}
                </mat-option>
              </mat-autocomplete>

              <mat-error *ngIf="jobAdForm.controls['organization'].hasError('required')">
                This field is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <ng-template #elseOrgBlock>Could not fetch organizations input!</ng-template>
          </div>

        <mat-form-field class="dd">
            <mat-label>Type</mat-label>
            <mat-select formControlName="job_type" required>
              <mat-option *ngFor="let o of JOB_TYPES" [value]="o.id">{{o.name}}</mat-option>
            </mat-select>
        </mat-form-field>

        <app-datetime 
          (newDatetime)=onPublishChange($event)
          [value]="jobAdForm.value.time_publish" 
          [dateLabel]="'Publish Date'" 
          [timeLabel]="'Publish Time'">
        </app-datetime>
    
        <app-input-selector
          #skillSelector
          [values]="skills"
          [label]="'Skills'"
          [inputPlaceholder]="'Enter skill'">
        </app-input-selector>

        <app-input-selector
          #citySelector
          [values]="cities"
          [label]="'Cities'"
          [inputPlaceholder]="'Enter city'">
        </app-input-selector>

        <mat-slide-toggle 
          style="margin-left: 1rem;"
          formControlName="highlight">
          Highlight Ad
        </mat-slide-toggle>
    </div>

    <div class="block">
        <h2>Application</h2>
        <mat-form-field class="row">
            <input matInput formControlName="application_url">
            <mat-label>Application URL</mat-label>
        </mat-form-field>
        
        <app-datetime 
          (newDatetime)=onDeadlineChange($event) 
          [value]="jobAdForm.value.application_deadline" 
          [dateLabel]="'Deadline Date'" 
          [timeLabel]="'Deadline Time'">
        </app-datetime>
    </div>

    <div class="block">
        <h2>Image</h2>
        <mat-form-field class="row">
            <input matInput formControlName="banner_image">
            <mat-label>Banner Image</mat-label>
        </mat-form-field>
    </div>
</div>
</form>
